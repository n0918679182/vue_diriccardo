import{d as x,e as I,m as u,f as p,_ as C,o as a,c as r,a as e,F as l,g as b,t as c,h as _,r as g,b as v,l as y,n as f,i as P}from"./index-327ce774.js";import{c as h}from"./cartStore-4e7db13b.js";const $=x("productStore",{state:()=>({products:[],menuItem:[]}),actions:{async getProducts(){this.products=[],this.menuItem=[],await I.get("https://diriccardo-server.onrender.com/products").then(t=>{this.products=t.data;const o=new Set;t.data.filter(n=>o.has(n.type)?!1:o.add(n.type)).forEach(n=>{this.menuItem.push({type:n.type,chi:n.type=="contorni"?"佐酒小點":n.type=="zuppa"?"湯":n.type=="insalata"?"沙拉":n.type=="antipasto"?"開胃菜":n.type=="specialita"?"主廚特選":n.type=="carne"?"多人分享主餐":n.type=="pasta"?"義大利麵、燉飯":n.type=="pizza"?"拿坡里披薩":n.type=="dolce"?"甜點":"雞尾酒與啤酒"})})}).catch(t=>{alert(t.response.data.message)})}}}),S={methods:{...u(h,["totalChosenOrdersCount","totalChosenOrdersPrice","cancelOrderItem","cancelAllChosen","createOrder","addToKitchen","getChosenOrders"])},computed:{...p(h,["chosenOrders"])},mounted(){this.getChosenOrders()}},B={class:"offcanvas offcanvas-start",tabindex:"-1",id:"chosenOrders","aria-labelledby":"chosenOrdersLabel"},L=e("div",{class:"offcanvas-header border-bottom"},[e("h5",{class:"offcanvas-title",id:"chosenOrdersLabel"},"已選餐點"),e("button",{type:"button",class:"btn-close text-reset","data-bs-dismiss":"offcanvas","aria-label":"Close",id:"chosenOrdersCloseBtn"})],-1),V={key:0,class:"offcanvas-body d-flex align-items-center justify-content-center"},j=e("p",{class:"h4 text-secondary"},"尚未選取餐點",-1),z=[j],A={key:1,class:"offcanvas-body justify-content-between d-flex flex-column"},M={class:"border rounded-2 p-2 mb-3 maxh500"},T={class:"mb-0 col-6 d-flex align-items-center"},N={class:"mb-0 col-3 d-flex align-items-center"},E={class:"mb-0 col-2 d-flex align-items-center"},F=["onClick"],U={class:"col-12 border d-flex mt-2"},D=["onClick"],K=["onClick"],q={class:"border rounded-2 p-2 d-flex flex-column"},G={class:"d-flex justify-content-between align-items-end mb-3"},H={class:"d-flex align-items-end"},J={class:"mb-0 ms-2 h6"},Q={class:"mb-0 ms-3 h6"},R={class:"text-success"},W=e("i",{class:"bx bx-trash me-2"},null,-1);function X(t,o,n,O,w,k){return a(),r("div",B,[L,t.chosenOrders.length==0?(a(),r("div",V,z)):(a(),r("div",A,[e("div",M,[(a(!0),r(l,null,b(t.chosenOrders,(d,m)=>(a(),r("div",{class:"py-1 row",key:m},[e("p",T,c(d.name),1),e("p",N,"$ "+c(d.price),1),e("p",E,"x "+c(d.count),1),e("i",{class:"m-0 col-1 bx bx-x text-danger d-flex justify-content-end align-items-center h3",role:"button",onClick:s=>t.cancelOrderItem(m)},null,8,F),e("div",U,[e("div",{class:"py-1 px-5 changeOrderCountBtn w-50 text-center border-end",role:"button",onClick:s=>d.count<2?0:d.count-=1},"-",8,D),e("div",{class:"py-1 px-5 changeOrderCountBtn w-50 text-center",role:"button",onClick:s=>d.count+=1}," +",8,K)])]))),128))]),e("div",q,[e("div",G,[e("div",H,[e("p",J,"共 "+c(t.totalChosenOrdersCount())+" 項",1),e("p",Q,[_("$ "),e("span",R,c(t.totalChosenOrdersPrice()),1)])]),e("button",{type:"button",class:"btn btn-outline-danger btn-sm d-flex align-items-center",onClick:o[0]||(o[0]=(...d)=>t.cancelAllChosen&&t.cancelAllChosen(...d))},[W,_("清空")])]),e("div",{class:"btn btn-danger w-100",onClick:o[1]||(o[1]=(...d)=>t.createOrder&&t.createOrder(...d))},"送出餐點")])]))])}const Y=C(S,[["render",X]]),Z="/vue_diriccardo/assets/product-bg1-4903a4f4.png",ee="/vue_diriccardo/assets/product-bg2-3e4d4bbd.png";const te={methods:{...u($,["getProducts"]),...u(h,["getOrderItem","sentOrderItem","getChonseOrders"]),...u(y,["loading"])},computed:{...p($,["menuItem","products"]),...p(h,["tempProduct","chosenOrders"]),...p(y,["isLoading"])},components:{SelectedProducts:Y},mounted(){this.getProducts(),this.loading()}},se={class:"order w-100 pt-4 overflow-hidden position-relative vh-100"},oe=e("img",{src:Z,class:"orderBg_img1",alt:""},null,-1),ne=e("img",{src:ee,class:"orderBg_img2",alt:""},null,-1),de={class:"container mt-20"},ae={class:"row mt-5 pt-4"},re={class:"col-2"},ce={class:"border border-white rounded-1 list-unstyled bg-order-sidemenu bg-shadow",id:"myTab",role:"tablist"},ie=["data-bs-target","aria-controls"],le={class:"col-10"},me={class:"tab-content border border-white rounded-1 bg-order-content bg-shadow pt-4 px-4",id:"myTabContent"},ue=["id"],pe={class:"row"},be=["onClick"],he={class:"position-absolute top-0 end-0 me-2 mt-1 bg-white order-item-price"},_e={class:"m-0"},ge={class:"p-2 w-100 order-item-title"},ve={class:"mb-0"},ye={class:"col-12"},fe={class:"modal fade",id:"orderItemModal",tabindex:"-1","aria-labelledby":"orderItemModalLabel","aria-hidden":"true","data-bs-backdrop":"static","data-bs-keyboard":"false"},$e={class:"modal-dialog modal-dialog-centered modal-sm"},Ce={class:"modal-content"},Oe={class:"modal-header"},we={class:"modal-title h6"},ke={class:"modal-body p-0 d-flex justify-content-between"},xe={class:"p-3"},Ie={class:"modal-footer py-1"};function Pe(t,o,n,O,w,k){const d=g("VueLoading"),m=g("SelectedProducts");return a(),r(l,null,[v(d,{active:t.isLoading,"onUpdate:active":o[0]||(o[0]=s=>t.isLoading=s)},null,8,["active"]),e("div",se,[oe,ne,e("div",de,[e("div",ae,[e("div",re,[e("ul",ce,[(a(!0),r(l,null,b(t.menuItem,s=>(a(),r("li",{class:"nav-item w-100 text-center d-flex",role:"presentation",key:s.type},[e("a",{class:f(["text-white w-100 mt-auto mb-auto",{active:s.type=="contorni"}]),id:"home-tab","data-bs-toggle":"tab","data-bs-target":"#"+s.type,type:"button",role:"tab","aria-controls":s.type,"aria-selected":"true"},c(s.chi),11,ie)]))),128))])]),e("div",le,[e("div",me,[(a(!0),r(l,null,b(t.menuItem,s=>(a(),r("div",{class:f(["tab-pane fade",{show:s.type=="contorni",active:s.type=="contorni"}]),id:s.type,role:"tabpanel","aria-labelledby":"home-tab",key:s.type},[e("div",pe,[(a(!0),r(l,null,b(t.products.filter(i=>i.type==s.type),i=>(a(),r("div",{class:"col-3 mb-5",key:i.id,"data-bs-toggle":"modal","data-bs-target":"#orderItemModal",onClick:Se=>t.getOrderItem(i),role:"button"},[e("div",{class:"bg-img-set rounded-2 bg-shadow d-flex align-items-end position-relative",style:P([{height:"190px"},{backgroundImage:"url("+i.imgUrl+")"}])},[e("div",he,[e("p",_e,"$ "+c(i.price),1)]),e("div",ge,[e("p",ve,c(i.name),1)])],4)],8,be))),128))])],10,ue))),128))])]),e("div",ye,[e("button",{type:"button",class:"btn btn-dark w-100 border border-white bg-shadow","data-bs-toggle":"offcanvas","data-bs-target":"#chosenOrders","aria-controls":"chosenOrders",onClick:o[1]||(o[1]=(...s)=>t.getChonseOrders&&t.getChonseOrders(...s))},"確認已選餐點")])])])]),e("div",fe,[e("div",$e,[e("div",Ce,[e("div",Oe,[e("h5",we,c(t.tempProduct.name),1)]),e("div",ke,[e("div",{class:"py-3 px-5 changeOrderCountBtn",onClick:o[2]||(o[2]=s=>t.tempProduct.count<1?0:t.tempProduct.count-=1),role:"button"}," -"),e("div",xe,c(t.tempProduct.count),1),e("div",{class:"py-3 px-5 changeOrderCountBtn",onClick:o[3]||(o[3]=s=>t.tempProduct.count+=1),role:"button"},"+")]),e("div",Ie,[e("button",{type:"button",class:"btn btn-outline-danger btn-sm","data-bs-dismiss":"modal",id:"closeOrderItemModal",onClick:o[4]||(o[4]=s=>t.tempProduct.count=0)},"取消"),e("button",{type:"button",class:"btn btn-danger btn-sm",onClick:o[5]||(o[5]=(...s)=>t.sentOrderItem&&t.sentOrderItem(...s))},"確定")])])])]),v(m)],64)}const Ve=C(te,[["render",Pe]]);export{Ve as default};
