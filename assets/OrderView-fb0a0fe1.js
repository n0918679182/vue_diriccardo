import{d as C,e as O,m as p,f as b,_ as y,o as a,c as r,a as t,F as i,g as m,t as l,h,r as w,b as k,n as _,i as x}from"./index-251a82ab.js";import{c as u}from"./cartStore-41c18eca.js";const g=C("productStore",{state:()=>({products:[],menuItem:[]}),actions:{async getProducts(){this.products=[],this.menuItem=[],await O.get("http://localhost:3000/products").then(e=>{this.products=e.data;const o=new Set;e.data.filter(n=>o.has(n.type)?!1:o.add(n.type)).forEach(n=>{this.menuItem.push({type:n.type,chi:n.type=="contorni"?"佐酒小點":n.type=="zuppa"?"湯":n.type=="insalata"?"沙拉":n.type=="antipasto"?"開胃菜":n.type=="specialita"?"主廚特選":n.type=="carne"?"多人分享主餐":n.type=="pasta"?"義大利麵、燉飯":n.type=="pizza"?"拿坡里披薩":n.type=="dolce"?"甜點":"雞尾酒與啤酒"})})}).catch(e=>{console.log("productStore err",e.response.data.message)})}}}),I={methods:{...p(u,["totalChosenOrdersCount","totalChosenOrdersPrice","cancelOrderItem","cancelAllChosen","createOrder","addToKitchen","getChosenOrders"])},computed:{...b(u,["chosenOrders"])},mounted(){this.getChosenOrders()}},P={class:"offcanvas offcanvas-start",tabindex:"-1",id:"chosenOrders","aria-labelledby":"chosenOrdersLabel"},S=t("div",{class:"offcanvas-header border-bottom"},[t("h5",{class:"offcanvas-title",id:"chosenOrdersLabel"},"已選餐點"),t("button",{type:"button",class:"btn-close text-reset","data-bs-dismiss":"offcanvas","aria-label":"Close",id:"chosenOrdersCloseBtn"})],-1),B={key:0,class:"offcanvas-body d-flex align-items-center justify-content-center"},j=t("p",{class:"h4 text-secondary"},"尚未選取餐點",-1),z=[j],V={key:1,class:"offcanvas-body justify-content-between d-flex flex-column"},A={class:"border rounded-2 p-2 mb-3 maxh500"},L={class:"mb-0 col-6 d-flex align-items-center"},M={class:"mb-0 col-3 d-flex align-items-center"},T={class:"mb-0 col-2 d-flex align-items-center"},N=["onClick"],E={class:"col-12 border d-flex mt-2"},F=["onClick"],D=["onClick"],K={class:"border rounded-2 p-2 d-flex flex-column"},U={class:"d-flex justify-content-between align-items-end mb-3"},q={class:"d-flex align-items-end"},G={class:"mb-0 ms-2 h6"},H={class:"mb-0 ms-3 h6"},J={class:"text-success"},Q=t("i",{class:"bx bx-trash me-2"},null,-1);function R(e,o,n,v,f,$){return a(),r("div",P,[S,e.chosenOrders.length==0?(a(),r("div",B,z)):(a(),r("div",V,[t("div",A,[(a(!0),r(i,null,m(e.chosenOrders,(d,s)=>(a(),r("div",{class:"py-1 row",key:s},[t("p",L,l(d.name),1),t("p",M,"$ "+l(d.price),1),t("p",T,"x "+l(d.count),1),t("i",{class:"m-0 col-1 bx bx-x text-danger d-flex justify-content-end align-items-center h3",role:"button",onClick:c=>e.cancelOrderItem(s)},null,8,N),t("div",E,[t("div",{class:"py-1 px-5 changeOrderCountBtn w-50 text-center border-end",role:"button",onClick:c=>d.count<2?0:d.count-=1},"-",8,F),t("div",{class:"py-1 px-5 changeOrderCountBtn w-50 text-center",role:"button",onClick:c=>d.count+=1}," +",8,D)])]))),128))]),t("div",K,[t("div",U,[t("div",q,[t("p",G,"共 "+l(e.totalChosenOrdersCount())+" 項",1),t("p",H,[h("$ "),t("span",J,l(e.totalChosenOrdersPrice()),1)])]),t("button",{type:"button",class:"btn btn-outline-danger btn-sm d-flex align-items-center",onClick:o[0]||(o[0]=(...d)=>e.cancelAllChosen&&e.cancelAllChosen(...d))},[Q,h("清空")])]),t("div",{class:"btn btn-danger w-100",onClick:o[1]||(o[1]=(...d)=>e.createOrder&&e.createOrder(...d))},"送出餐點")])]))])}const W=y(I,[["render",R]]),X="/vue_diriccardo/assets/product-bg1-4903a4f4.png",Y="/vue_diriccardo/assets/product-bg2-3e4d4bbd.png";const Z={methods:{...p(g,["getProducts"]),...p(u,["getOrderItem","sentOrderItem","getChonseOrders"])},computed:{...b(g,["menuItem","products"]),...b(u,["tempProduct","chosenOrders"])},components:{SelectedProducts:W},mounted(){this.getProducts()}},tt={class:"order w-100 pt-4 overflow-hidden position-relative vh-100"},et=t("img",{src:X,class:"orderBg_img1",alt:""},null,-1),st=t("img",{src:Y,class:"orderBg_img2",alt:""},null,-1),ot={class:"container mt-20"},nt={class:"row mt-5 pt-4"},dt={class:"col-2"},at={class:"border border-white rounded-1 list-unstyled bg-order-sidemenu bg-shadow",id:"myTab",role:"tablist"},rt=["data-bs-target","aria-controls"],ct={class:"col-10"},lt={class:"tab-content border border-white rounded-1 bg-order-content bg-shadow pt-4 px-4",id:"myTabContent"},it=["id"],mt={class:"row"},ut=["onClick"],pt={class:"position-absolute top-0 end-0 me-2 mt-1 bg-white order-item-price"},bt={class:"m-0"},ht={class:"p-2 w-100 order-item-title"},_t={class:"mb-0"},gt={class:"col-12"},yt={class:"modal fade",id:"orderItemModal",tabindex:"-1","aria-labelledby":"orderItemModalLabel","aria-hidden":"true","data-bs-backdrop":"static","data-bs-keyboard":"false"},vt={class:"modal-dialog modal-dialog-centered modal-sm"},ft={class:"modal-content"},$t={class:"modal-header"},Ct={class:"modal-title h6"},Ot={class:"modal-body p-0 d-flex justify-content-between"},wt={class:"p-3"},kt={class:"modal-footer py-1"};function xt(e,o,n,v,f,$){const d=w("SelectedProducts");return a(),r(i,null,[t("div",tt,[et,st,t("div",ot,[t("div",nt,[t("div",dt,[t("ul",at,[(a(!0),r(i,null,m(e.menuItem,s=>(a(),r("li",{class:"nav-item w-100 text-center d-flex",role:"presentation",key:s.type},[t("a",{class:_(["text-white w-100 mt-auto mb-auto",{active:s.type=="contorni"}]),id:"home-tab","data-bs-toggle":"tab","data-bs-target":"#"+s.type,type:"button",role:"tab","aria-controls":s.type,"aria-selected":"true"},l(s.chi),11,rt)]))),128))])]),t("div",ct,[t("div",lt,[(a(!0),r(i,null,m(e.menuItem,s=>(a(),r("div",{class:_(["tab-pane fade",{show:s.type=="contorni",active:s.type=="contorni"}]),id:s.type,role:"tabpanel","aria-labelledby":"home-tab",key:s.type},[t("div",mt,[(a(!0),r(i,null,m(e.products.filter(c=>c.type==s.type),c=>(a(),r("div",{class:"col-3 mb-5",key:c.id,"data-bs-toggle":"modal","data-bs-target":"#orderItemModal",onClick:It=>e.getOrderItem(c),role:"button"},[t("div",{class:"bg-img-set rounded-2 bg-shadow d-flex align-items-end position-relative",style:x([{height:"190px"},{backgroundImage:"url("+c.imgUrl+")"}])},[t("div",pt,[t("p",bt,"$ "+l(c.price),1)]),t("div",ht,[t("p",_t,l(c.name),1)])],4)],8,ut))),128))])],10,it))),128))])]),t("div",gt,[t("button",{type:"button",class:"btn btn-dark w-100 border border-white bg-shadow","data-bs-toggle":"offcanvas","data-bs-target":"#chosenOrders","aria-controls":"chosenOrders",onClick:o[0]||(o[0]=(...s)=>e.getChonseOrders&&e.getChonseOrders(...s))},"確認已選餐點")])])])]),t("div",yt,[t("div",vt,[t("div",ft,[t("div",$t,[t("h5",Ct,l(e.tempProduct.name),1)]),t("div",Ot,[t("div",{class:"py-3 px-5 changeOrderCountBtn",onClick:o[1]||(o[1]=s=>e.tempProduct.count<1?0:e.tempProduct.count-=1),role:"button"}," -"),t("div",wt,l(e.tempProduct.count),1),t("div",{class:"py-3 px-5 changeOrderCountBtn",onClick:o[2]||(o[2]=s=>e.tempProduct.count+=1),role:"button"},"+")]),t("div",kt,[t("button",{type:"button",class:"btn btn-outline-danger btn-sm","data-bs-dismiss":"modal",id:"closeOrderItemModal",onClick:o[3]||(o[3]=s=>e.tempProduct.count=0)},"取消"),t("button",{type:"button",class:"btn btn-danger btn-sm",onClick:o[4]||(o[4]=(...s)=>e.sentOrderItem&&e.sentOrderItem(...s))},"確定")])])])]),k(d)],64)}const Bt=y(Z,[["render",xt]]);export{Bt as default};
